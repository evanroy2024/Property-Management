{% extends 'cmbase.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background-color: #f5f5f5;
      color: #333;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    h1 {
      text-align: center;
      margin-bottom: 2rem;
      color: #2c3e50;
      font-weight: 600;
    }
    
    .card {
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      margin-bottom: 1.5rem;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
    }
    
    .card-header {
      padding: 1.2rem;
      cursor: pointer;
      font-weight: 500;
      font-size: 1.2rem;
      text-align: center;
      color: #fff;
      position: relative;
      transition: all 0.3s ease;
    }
    
    .card-header:after {
      content: "+";
      position: absolute;
      right: 1.2rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.5rem;
      transition: all 0.3s ease;
    }
    
    .card.active .card-header:after {
      content: "−";
    }
    
    .card-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease;
    }
    
    .card.active .card-content {
      max-height: 800px;
    }
    
    .sub-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      padding: 1.2rem;
    }
    
    .sub-option {
      background-color: #f8f9fa;
      border-radius: 6px;
      padding: 1rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid #e9ecef;
      position: relative;
    }
    
    .sub-option:hover {
      background-color: #e9ecef;
      transform: scale(1.02);
    }
    
    .sub-option.has-children:after {
      content: "+";
      position: absolute;
      right: 0.8rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.2rem;
      color: #888;
    }
    
    .sub-option.expanded:after {
      content: "−";
    }
    
    .third-level-options {
      display: none;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.8rem;
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px dashed #ddd;
    }
    
    .third-level-options.visible {
      display: grid;
    }
    
    .third-level-option {
      background-color: #e6f3f7;
      border-radius: 4px;
      padding: 0.8rem;
      text-align: center;
      font-size: 0.9rem;
      border: 1px solid #c9e3eb;
      transition: all 0.2s ease;
    }
    
    .third-level-option:hover {
      background-color: #d0e8f0;
      transform: scale(1.05);
    }
    
    /* Color themes for different cards */
    .property-management {
      background-color: #f1e8dd;
    }
    
    .property-management .card-header {
      background-color: #e8d5c4;
      color: #5a4636;
    }
    
    .pre-arrival {
      background-color: #e6ccad;
    }
    
    .pre-arrival .card-header {
      background-color: #dbb98f;
      color: #5a4636;
    }
    
    .departure {
      background-color: #e9b072;
    }
    
    .departure .card-header {
      background-color: #e19540;
      color: #fff;
    }
    
    .client {
      background-color: #8fd4e6;
    }
    
    .client .card-header {
      background-color: #70c9df;
      color: #fff;
    }
    
    .cms {
      background-color: #5aafca;
    }
    
    .cms .card-header {
      background-color: #4599b3;
      color: #fff;
    }
    
    .vendors {
      background-color: #2f7d98;
    }
    
    .vendors .card-header {
      background-color: #26667c;
      color: #fff;
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    /* Responsive design */
    @media (max-width: 600px) {
      .sub-options, .third-level-options {
        grid-template-columns: 1fr;
      }
      
      body {
        padding: 1rem;
      }
    }
    .fade-in {
    animation: fadeIn 0.5s ease;
    color: #323131;
    font-weight: bold;
}
  </style>
  <div class="container">
    <h1>Property Management Dashboard</h1>
    
    <!-- Property Management -->
    <div class="card property-management">
      <div class="card-header">Property Management</div>
      <div class="card-content">
        <div class="sub-options">
          <div class="sub-option has-children" data-id="property-analytics">
            Property Details
            <div class="third-level-options">
                <div class="third-level-option" onclick="window.location.href='{% url 'clientmanager:property_list' %}'">Property List</div>
                <div class="third-level-option" onclick="window.location.href='{% url 'clientmanager:property_create' %}'">Create Property</div>
            </div>
          </div>
          <div class="sub-option has-children" data-id="property-analytics">
            Property Improvement
            <div class="third-level-options">
                <div class="third-level-option" onclick="window.location.href='{% url 'clientmanager:property_pending_requests' %}'">Pending </div>
                <div class="third-level-option" onclick="window.location.href='{% url 'clientmanager:property_open_requests' %}'">Open </div>
                <div class="third-level-option" onclick="window.location.href='{% url 'clientmanager:property_completed_requests' %}'">Completed </div>
                <div class="third-level-option" onclick="window.location.href='{% url 'clientmanager:property_denied_requests' %}'">Denied </div>
            </div>
          </div>
          <div class="sub-option has-children" data-id="maintenance-records">
            Service Request
            <div class="third-level-options">
              <div class="third-level-option" onclick="window.location.href='{% url 'clientmanager:prearrival_requests' %}'">Pending</div>
              <div class="third-level-option" onclick="window.location.href='{% url 'clientmanager:prearrival_requests' %}'">Open</div>
              <div class="third-level-option" onclick="window.location.href='{% url 'clientmanager:prearrival_requests' %}'">Completed</div>
              <div class="third-level-option" onclick="window.location.href='{% url 'clientmanager:prearrival_requests' %}'">Denied</div>
            </div>
          </div>
          <div class="sub-option has-children" data-id="financial-reports">
            Concierge Request
            <div class="third-level-options">
                <div class="third-level-option" onclick="window.location.href='{% url 'clientmanager:prearrival_requests' %}'">Pending </div>
                <div class="third-level-option" onclick="window.location.href='{% url 'clientmanager:prearrival_requests' %}'">Open </div>
                <div class="third-level-option" onclick="window.location.href='{% url 'clientmanager:prearrival_requests' %}'">Completed </div>
                <div class="third-level-option" onclick="window.location.href='{% url 'clientmanager:prearrival_requests' %}'">Denied </div>
            </div>
          </div>
          
          
        </div>
      </div>
    </div>
    <div class="card pre-arrival">
        <div class="card-header">Walk-Thru Reports</div>
        <div class="card-content">
          <div class="sub-options">
            <div class="sub-option has-children" data-id="property-details" onclick="window.location.href='{% url 'clientmanager:walkthrough-form' %}'">
              Create Report
            </div>
            <div class="sub-option has-children" data-id="property-details" onclick="window.location.href='{% url 'walkthroughreport:my_reports' %}'">
              FULL WALK-THRU REPORTS
             </div>
            <div class="sub-option has-children" data-id="property-details" onclick="window.location.href='{% url 'walkthroughreport:all_reports' %}'">
             Visit All Reports
            </div>
           
            <div class="sub-option has-children" data-id="property-details" onclick="window.location.href='{% url 'walkthroughreport:open_reports' %}'">
              Open Reports
            </div>
            <div class="sub-option has-children" data-id="property-details" onclick="window.location.href='{% url 'walkthroughreport:completed_reports' %}'">
              Completed Reports
            </div>
            <div class="sub-option has-children" data-id="property-details" onclick="window.location.href='{% url 'walkthroughreport:denied_reports' %}'">
              Denied Reports
            </div>
            
            
          </div>
        </div>
      </div>
    <!-- Pre-Arrival Info -->
    <div class="card pre-arrival" onclick="window.location.href='{% url 'clientmanager:prearrival_requests' %}'">
      <div class="card-header">Pre-Arrival Info</div>
     
    </div>
    
    <!-- Departure Info -->
    <div class="card departure" onclick="window.location.href='{% url 'clientmanager:departure_requests' %}'">
      <div class="card-header">Departure Info</div>
      
    </div>
    
    <!-- Manage Client -->
    <div class="card client">
      <div class="card-header">Manage Client</div>
      <div class="card-content">
        <div class="sub-options">
          <div class="sub-option" onclick="window.location.href='{% url 'clientmanager:client_list_page' %}'">Client Profiles</div>
          <div class="sub-option" onclick="window.location.href='{% url 'clientmanager:client_create_view' %}'">Create Profiles</div>
        </div>
      </div>
    </div>
    
    <!-- Manage CM's -->
    <div class="card cms">
      <div class="card-header">Manage Your Details</div>
      <div class="card-content">
        <div class="sub-options">
          <div class="sub-option" onclick="window.location.href='{% url 'clientmanager:clientmanager_profile_view' %}'">Profile</div>
          <div class="sub-option" onclick="window.location.href='{% url 'clientmanager:clientmanager_profile_edit' %}'">Customize</div>

        </div>
      </div>
    </div>
    
    <!-- Manage Vendors -->
    <div class="card vendors">
      <div class="card-header">Manage Vendors</div>
      <div class="card-content">
        <div class="sub-options">
          <div class="sub-option" onclick="window.location.href='{% url 'clientmanager:vendor_list' %}'">Vendor Lists</div>
          <div class="sub-option" onclick="window.location.href='{% url 'clientmanager:create_vendor' %}'">New Vendor</div>
        </div>
      </div>
    </div>
    <div class="card vendors">
      <div class="card-header">Messages & Chats </div>
      <div class="card-content">
        <div class="sub-options">
          <div class="sub-option" onclick="window.location.href='{% url 'my_properties' %}'">open Client Chats</div>
          <div class="sub-option" onclick="window.location.href='{% url 'contentpage:send_message' %}'" >Contact Admin</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const cards = document.querySelectorAll('.card');
      
      // Main card expansion
      cards.forEach(card => {
        const header = card.querySelector('.card-header');
        
        header.addEventListener('click', () => {
          // Close all other cards
          cards.forEach(otherCard => {
            if (otherCard !== card && otherCard.classList.contains('active')) {
              otherCard.classList.remove('active');
              
              // Reset all sub-options in other cards
              const otherSubOptions = otherCard.querySelectorAll('.sub-option');
              otherSubOptions.forEach(subOption => {
                subOption.classList.remove('expanded');
                const thirdLevel = subOption.querySelector('.third-level-options');
                if (thirdLevel) {
                  thirdLevel.classList.remove('visible');
                }
              });
            }
          });
          
          // Toggle current card
          card.classList.toggle('active');
          
          // Add fade-in effect to sub-options when expanded
          if (card.classList.contains('active')) {
            const subOptions = card.querySelectorAll('.sub-option');
            subOptions.forEach((option, index) => {
              option.classList.remove('fade-in');
              // Trigger reflow
              void option.offsetWidth;
              option.classList.add('fade-in');
              option.style.animationDelay = `${index * 0.1}s`;
            });
          }
        });
      });
      
      // Sub-options with third level options
      const subOptionsWithChildren = document.querySelectorAll('.sub-option.has-children');
      subOptionsWithChildren.forEach(option => {
        option.addEventListener('click', function(e) {
          e.stopPropagation();
          
          // Close other expanded options in the same group
          const parentCard = this.closest('.card');
          const siblingOptions = parentCard.querySelectorAll('.sub-option.has-children');
          
          siblingOptions.forEach(siblingOption => {
            if (siblingOption !== this && siblingOption.classList.contains('expanded')) {
              siblingOption.classList.remove('expanded');
              const thirdLevel = siblingOption.querySelector('.third-level-options');
              thirdLevel.classList.remove('visible');
            }
          });
          
          // Toggle current option
          this.classList.toggle('expanded');
          const thirdLevelOptions = this.querySelector('.third-level-options');
          thirdLevelOptions.classList.toggle('visible');
          
          // Apply animation to third-level options
          if (thirdLevelOptions.classList.contains('visible')) {
            const options = thirdLevelOptions.querySelectorAll('.third-level-option');
            options.forEach((option, index) => {
              option.classList.remove('fade-in');
              void option.offsetWidth;
              option.classList.add('fade-in');
              option.style.animationDelay = `${index * 0.08}s`;
            });
          }
          
          // Adjust card height to accommodate expanded content
          if (parentCard.classList.contains('active')) {
            parentCard.querySelector('.card-content').style.maxHeight = '1000px';
          }
        });
      });
      
      // Click effect for third-level options
      const thirdLevelOptions = document.querySelectorAll('.third-level-option');
      thirdLevelOptions.forEach(option => {
        option.addEventListener('click', function(e) {
          e.stopPropagation();
          this.style.transform = 'scale(0.95)';
          setTimeout(() => {
            this.style.transform = 'scale(1.05)';
          }, 100);
          
          // Here you would typically implement navigation or action
          console.log('Selected:', this.textContent);
        });
      });
      
      // Regular sub-options click effect
      const regularSubOptions = document.querySelectorAll('.sub-option:not(.has-children)');
      regularSubOptions.forEach(option => {
        option.addEventListener('click', function() {
          this.style.transform = 'scale(0.95)';
          setTimeout(() => {
            this.style.transform = 'scale(1.02)';
          }, 100);
        });
      });
    });
  </script>
{% endblock %}
