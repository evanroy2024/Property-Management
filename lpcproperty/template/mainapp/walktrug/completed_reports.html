{% extends 'outbase.html' %}

{% load static %}

{% block content %}
<style>
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600&display=swap');

*{
    box-sizing:border-box;
    font-family:'Roboto',sans-serif!important;
}

body{
    background:#f8f9fb;
    color:#111827;
}

.page-wrap{
    width:100%;
    padding:24px 32px;
}

.page-title{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:12px;
    font-size:30px;
    font-weight:500;
    margin-bottom:12px;
}

.page-title img{
    width:52px;
}

.page-subtitle{
    text-align:center;
    color:#6b7280;
    font-size:15px;
    margin-bottom:26px;
    max-width:700px;
    margin-left:auto;
    margin-right:auto;
}

.nav-tabs{
    display:flex;
    justify-content:center;
    gap:14px;
    margin-bottom:26px;
    flex-wrap:wrap;
}

.nav-tab{
    padding:12px 24px;
    border-radius:10px;
    font-size:15px;
    font-weight:500;
    text-decoration:none;
    transition:all 0.2s ease;
}

.nav-tab.all{
    background:#2563eb;
    color:#fff;
}

.nav-tab.all:hover{
    background:#1d4ed8;
}

.nav-tab.open{
    background:#f59e0b;
    color:#000;
}

.nav-tab.open:hover{
    background:#d97706;
}

.nav-tab.completed{
    background:#10b981;
    color:#fff;
}

.nav-tab.completed:hover{
    background:#059669;
}

.nav-tab.denied{
    background:#ef4444;
    color:#fff;
}

.nav-tab.denied:hover{
    background:#dc2626;
}

.card{
    background:#fff;
    border-radius:14px;
    box-shadow:0 8px 24px rgba(0,0,0,.08);
    padding:18px 18px 8px;
}

.filters{
    display:flex;
    gap:14px;
    margin-bottom:18px;
    flex-wrap:wrap;
}

.filter-select{
    flex:1;
    min-width:260px;
    background:#fff;
    border:1px solid #e5e7eb;
    border-radius:10px;
    padding:14px 16px;
    font-size:15px;
    font-weight:400;
    color:#111;
}

.table-wrap{
    width:100%;
    overflow-x:auto;
}

.table{
    width:100%;
    border-collapse:collapse;
    min-width:1000px;
}

.table thead th{
    padding:16px 14px;
    font-size:15px;
    font-weight:600;
    border-bottom:1px solid #e5e7eb;
    text-align:left;
    text-transform:uppercase;
    letter-spacing:.4px;
}

.table tbody td{
    padding:18px 14px;
    font-size:15px;
    font-weight:400;
    border-bottom:1px solid #f1f1f1;
    vertical-align:top;
}

.table tbody tr:hover{
    background:#fafafa;
}

.view-link{
    color:#2563eb;
    font-weight:500;
    text-decoration:none;
}

.view-link:hover{
    text-decoration:underline;
}

.empty{
    text-align:center;
    padding:26px;
    font-weight:500;
}

@media(max-width:768px){
    .page-wrap{
        padding:20px;
    }
    .page-title{
        font-size:22px;
    }
    .page-subtitle{
        font-size:14px;
    }
    .nav-tabs{
        gap:10px;
    }
    .nav-tab{
        padding:10px 18px;
        font-size:14px;
    }
}
</style>

<div class="page-wrap">

    <div class="page-title">
        <img src="{% static 'img/smalllogo.png' %}" alt="">
        Walk-Thru Completed Reports
    </div>

    <div class="page-subtitle">
        All your Service Request Completed Items are here. Go through them and if you have any questions, kindly get back to us.
    </div>

  

    <div class="card">

        <form method="get" class="filters">

            <select name="property" class="filter-select" onchange="this.form.submit()">
                <option value="">All Properties</option>
                {% for p in properties %}
                    <option value="{{ p.id }}" {% if request.GET.property == p.id|stringformat:"s" %}selected{% endif %}>
                        {{ p.address }}
                    </option>
                {% endfor %}
            </select>

            <select name="month" class="filter-select" onchange="this.form.submit()">
                <option value="">All Months</option>
                {% for m in months %}
                    <option value="{{ m|date:'Y-m' }}" {% if request.GET.month == m|date:'Y-m' %}selected{% endif %}>
                        {{ m|date:"F Y" }}
                    </option>
                {% endfor %}
            </select>

        </form>

        <div class="table-wrap">
            <table class="table">
                <thead>
                    <tr>
                        <th>REPORT DATE</th>
                        <th>DESCRIPTION</th>
                        <th>TOTAL COST</th>
                        <th>ACTION</th>
                    </tr>
                </thead>
                <tbody>
                    {% for report in reports %}
                    <tr>
                        <td>
                            {{ report.datetime|date:"M d, Y" }}<br>
                            {{ report.datetime|date:"h:i A" }}
                        </td>
                        <td>{{ report.description }}</td>
                        <td>${{ report.cost }}</td>
                        <td>
                            <a href="{% url 'mainapp:report_detail' report.pk %}" class="view-link">
                                View
                            </a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="4" class="empty">
                            No completed reports found
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    </div>
</div>

{% endblock content %}